<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5494049082029237"
        crossorigin="anonymous"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>016 Empregos Franca</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 8px;
        }

        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Evita rolagem dupla quando menu aberto */
        body.menu-open {
            overflow: hidden;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 font-sans">

    <!-- HEADER -->
    <header class="bg-white border-b sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <a href="#" class="flex items-center gap-3">
                <img src="/public/016empregos.jpg" alt="016 Empregos Franca"
                    class="w-10 h-10 rounded-full object-cover">
                <div>
                    <div class="text-lg font-semibold">016 Empregos Franca</div>
                    <div class="text-sm text-gray-500">Conectando talentos e oportunidades</div>
                </div>
            </a>

            <!-- BotÃ£o hambÃºrguer -->
            <button id="menu-btn" class="lg:hidden text-2xl focus:outline-none">
                â˜°
            </button>

            <!-- BotÃµes desktop -->
            <div class="hidden lg:flex items-center gap-3">
                <a href="planos.html"
                    class="px-4 py-2 rounded-md bg-green-600 hover:bg-green-700 text-white flex items-center gap-2">
                    ğŸ’¼ <span>Anunciar</span>
                </a>

                <a href="https://chat.whatsapp.com/FejC0MSgfOt6FlH9RSLVCs" target="_blank"
                    class="px-4 py-2 rounded-md border border-green-600 text-green-700 hover:bg-green-50 flex items-center gap-2">
                    ğŸ’¬ <span>Entrar no Grupo</span>
                </a>
            </div>
        </div>

        <!-- MENU MOBILE -->
        <div id="mobile-menu"
            class="hidden fixed inset-0 bg-white z-40 p-5 overflow-y-auto transition-all duration-300 lg:hidden">
            <div class="flex justify-between items-center mb-5">
                <h2 class="text-lg font-semibold">Menu</h2>
                <button id="close-menu" class="text-2xl">âœ–</button>
            </div>

            <a href="planos.html"
                class="block px-4 py-3 rounded-md bg-green-600 hover:bg-green-700 text-white mb-3 text-center">
                ğŸ’¼ Anunciar
            </a>
            <a href="https://chat.whatsapp.com/FejC0MSgfOt6FlH9RSLVCs" target="_blank"
                class="block px-4 py-3 rounded-md border border-green-600 text-green-700 hover:bg-green-50 mb-6 text-center">
                ğŸ’¬ Entrar no Grupo
            </a>

             <h4 class="text-white font-semibold mb-3">Contato</h4>
                <ul class="space-y-2 text-sm">
                    <li>ğŸ“ Franca - SP</li>
                    <li>ğŸ“§ <a href="mailto:contato@empregosemfranca.com"
                            class="hover:text-white">contato@empregosemfranca.com</a></li>
                    <li>ğŸ“± <a href="https://wa.me/55016991242066" class="hover:text-white">WhatsApp: (16) 99124-2066</a>
                    </li>

                    <ul class="space-y-2 text-sm">
                    <li><a href="sobre.html" class="hover:text-white">Sobre NÃ³s</a></li>
                    <li><a href="planos.html" class="hover:text-white">Anuncie Conosco</a></li>
                    <li><a href="#" class="hover:text-white">Termos de Uso</a></li>
                    <li><a href="#" class="hover:text-white">PolÃ­tica de Privacidade</a></li>
                </ul>
                </ul>

            <hr class="my-4" />
            
        </div>
    </header>

    <!-- HERO -->
    <section class="bg-gradient-to-r from-blue-600 to-blue-500 text-white py-10">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-2xl md:text-3xl font-extrabold mb-2">Vagas em Franca â€” encontre sua prÃ³xima oportunidade
            </h1>
            <p class="text-sm md:text-base opacity-90 mb-6">Pesquise por cargo, empresa ou palavra-chave. Atualizado
                diariamente.</p>

            <div class="max-w-3xl mx-auto">
                <div class="flex gap-2 shadow-lg rounded-md overflow-hidden">
                    <input id="search-input" type="search" placeholder="Ex: Atendente, auxiliar de produÃ§Ã£o, vendedor"
                        class="w-full px-4 py-3 text-gray-800 focus:outline-none" />
                    <button id="clear-search" class="px-4 bg-white/10 hover:bg-white/20 text-sm">Limpar</button>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTEÃšDO PRINCIPAL -->
    <main class="container mx-auto px-4 py-10 grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- SIDEBAR: Filtros de Cargos -->
        <aside class="lg:col-span-1">
            <div class="bg-white rounded-xl shadow-lg p-6 sticky top-6">
                <h3 class="font-semibold mb-4 text-lg flex items-center gap-2 text-blue-600">
                    ğŸ¯ Filtrar por cargo
                </h3>

                <div id="tag-filter-box" class="space-y-3 max-h-[420px] overflow-y-auto pr-2 custom-scroll">
                    <!-- checkboxes serÃ£o gerados dinamicamente aqui -->
                </div>

                <hr class="my-5 border-gray-200" />

                <div>
                    <h4 class="font-medium text-sm mb-2 text-gray-700">Ordenar por</h4>
                    <select id="sort-select"
                        class="w-full border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none">
                        <option value="recent">Mais recentes</option>
                        <option value="alpha">A â†’ Z (tÃ­tulo)</option>
                    </select>
                </div>
            </div>
        </aside>

        <!-- LISTA DE VAGAS -->
        <section class="lg:col-span-3">
            <div id="manual-jobs" class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            <div id="search-results" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            <div class="mt-6 flex justify-center">
                <button id="load-more" class="px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700">Carregar
                    mais</button>
            </div>
        </section>
    </main>

    <!-- RODAPÃ‰ -->
    <footer class="bg-gray-900 text-gray-300 mt-10 pt-10">
        <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h3 class="text-white font-semibold text-lg mb-3">016 Empregos Franca</h3>
                <p class="text-sm leading-relaxed">
                    Conectamos talentos e oportunidades em Franca e regiÃ£o.
                    Seu portal gratuito de vagas atualizado diariamente.
                </p>
            </div>
            <div>
                <h4 class="text-white font-semibold mb-3">Institucional</h4>
                <ul class="space-y-2 text-sm">
                    <li><a href="sobre.html" class="hover:text-white">Sobre NÃ³s</a></li>
                    <li><a href="planos.html" class="hover:text-white">Anuncie Conosco</a></li>
                    <li><a href="#" class="hover:text-white">Termos de Uso</a></li>
                    <li><a href="#" class="hover:text-white">PolÃ­tica de Privacidade</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-semibold mb-3">Categorias Populares</h4>
                <ul class="space-y-2 text-sm">
                    <li>Atendimento e Vendas</li>
                    <li>AdministraÃ§Ã£o</li>
                    <li>IndÃºstria e ProduÃ§Ã£o</li>
                    <li>ServiÃ§os Gerais</li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-semibold mb-3">Contato</h4>
                <ul class="space-y-2 text-sm">
                    <li>ğŸ“ Franca - SP</li>
                    <li>ğŸ“§ <a href="mailto:contato@empregosemfranca.com"
                            class="hover:text-white">contato@empregosemfranca.com</a></li>
                    <li>ğŸ“± <a href="https://wa.me/55016991242066" class="hover:text-white">WhatsApp: (16) 99124-2066</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="border-t border-gray-800 mt-10 py-4 text-center text-sm text-gray-500">
            Â© 2025 016 Empregos Franca â€” Todos os direitos reservados.
        </div>
    </footer>

    <script>
        // MENU MOBILE
        const menuBtn = document.getElementById('menu-btn');
        const closeMenu = document.getElementById('close-menu');
        const mobileMenu = document.getElementById('mobile-menu');

        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
            document.body.classList.add('menu-open');
        });

        closeMenu.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
            document.body.classList.remove('menu-open');
        });

        // Copia filtros para menu mobile
        function syncFilters() {
            const tags = document.getElementById('tag-filter-box');
            const mobileTags = document.getElementById('mobile-tag-filter');
            if (tags && mobileTags) {
                mobileTags.innerHTML = tags.innerHTML;
            }
        }

        // Seu script original de vagas
        async function loadJobs() {
            try {
                const response = await fetch('public/jobs.json');
                const jobs = await response.json();
                initializeJobs(jobs);
                syncFilters();
            } catch (err) {
                console.error('Erro ao carregar jobs.json:', err);
            }
        }

        function initializeJobs(jobs) {
            let filteredJobs = [...jobs];
            const jobsPerPage = 8;
            let currentPage = 1;

            const searchInput = document.getElementById('search-input');
            const clearSearchBtn = document.getElementById('clear-search');
            const tagFilterBox = document.getElementById('tag-filter-box');
            const sortSelect = document.getElementById('sort-select');
            const loadMoreBtn = document.getElementById('load-more');
            const resultsContainer = document.getElementById('search-results');

            // ğŸ”¹ Cria uma lista Ãºnica de tÃ­tulos de vagas
            const uniqueTitles = [...new Set(jobs.map(j => j.title.trim()))];

            // ğŸ”¹ Gera os checkboxes de filtro
            tagFilterBox.innerHTML = uniqueTitles.map(title => `
    <label class="flex items-center gap-2 border-b py-1 cursor-pointer hover:bg-blue-50 rounded transition">
      <input type="checkbox" class="tag-checkbox accent-blue-600" value="${title.toLowerCase()}">
      <span class="text-sm">${title}</span>
    </label>
  `).join('');

            // ğŸ”¹ Eventos
            searchInput.addEventListener('input', handleSearch);
            clearSearchBtn.addEventListener('click', () => {
                searchInput.value = '';
                handleSearch();
            });
            sortSelect.addEventListener('change', () => {
                sortJobs();
                renderJobs();
            });
            tagFilterBox.addEventListener('change', handleCheckboxFilter);
            loadMoreBtn.addEventListener('click', () => {
                currentPage++;
                renderJobs();
            });

            // ğŸ”¹ Filtro mÃºltiplo com checkboxes
            function handleCheckboxFilter() {
                const selected = [...document.querySelectorAll('.tag-checkbox:checked')].map(cb => cb.value);
                if (selected.length === 0) {
                    filteredJobs = [...jobs];
                } else {
                    filteredJobs = jobs.filter(j =>
                        selected.some(tag => j.title.toLowerCase() === tag)
                    );
                }
                currentPage = 1;
                renderJobs();
            }

            // ğŸ”¹ Destaca telefones, WhatsApp e e-mails com Ã­cones
            function highlightText(text) {
                if (!text) return '';

                // WhatsApp (com ou sem +55)
                text = text.replace(/(\+?55\s?\(?\d{2}\)?\s?\d{4,5}-?\d{4})/g, match => {
                    const cleaned = match.replace(/\D/g, '');
                    return `<a href="https://wa.me/${cleaned}" target="_blank" class="text-green-600 font-semibold hover:underline">ğŸ’¬ ${match}</a>`;
                });

                // Telefones comuns
                text = text.replace(/(\(?\d{2}\)?\s?\d{4,5}-?\d{4})/g, match => {
                    const cleaned = match.replace(/\D/g, '');
                    return `<a href="https://wa.me/55${cleaned}" target="_blank" class="text-green-600 font-semibold hover:underline">ğŸ“ ${match}</a>`;
                });

                // E-mails
                text = text.replace(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/g,
                    '<a href="mailto:$1" class="text-blue-600 font-medium hover:underline">ğŸ“§ $1</a>');

                return text;
            }

            // ğŸ”¹ Extrai link WhatsApp para botÃ£o â€œCandidatar-seâ€
            function extractWhatsAppLink(text) {
                const match = text.match(/(\+?55\s?\(?\d{2}\)?\s?\d{4,5}-?\d{4})/);
                if (match) {
                    const cleaned = match[0].replace(/\D/g, '');
                    return `https://wa.me/${cleaned}`;
                }
                return null;
            }

            // ğŸ”¹ Pesquisa
            function handleSearch() {
                const term = searchInput.value.toLowerCase();
                filteredJobs = jobs.filter(j =>
                    j.title.toLowerCase().includes(term) ||
                    j.description.toLowerCase().includes(term)
                );
                currentPage = 1;
                renderJobs();
            }

            // ğŸ”¹ OrdenaÃ§Ã£o
            function sortJobs() {
                const type = sortSelect.value;
                if (type === 'recent') {
                    filteredJobs.sort((a, b) => new Date(b.dateCollected) - new Date(a.dateCollected));
                } else if (type === 'alpha') {
                    filteredJobs.sort((a, b) => a.title.localeCompare(b.title));
                }
            }

            // ğŸ”¹ RenderizaÃ§Ã£o dos cards
            function renderJobs() {
                sortJobs();
                const start = 0;
                const end = currentPage * jobsPerPage;
                const visibleJobs = filteredJobs.slice(start, end);

                resultsContainer.innerHTML = visibleJobs.map(job => {
                    const highlightedDesc = highlightText(job.description);
                    const whatsappLink = extractWhatsAppLink(job.description);
                    return `
        <div class="bg-white rounded-lg shadow p-5 hover:shadow-lg transition border border-gray-100">
          <h3 class="font-bold text-lg mb-2 text-blue-700">${job.title}</h3>
          <p class="text-sm text-gray-700 leading-relaxed">${highlightedDesc}</p>
          <div class="flex items-center justify-between mt-4">
            <p class="text-xs text-gray-400">ğŸ“… ${new Date(job.dateCollected).toLocaleDateString('pt-BR')}</p>
            ${whatsappLink ? `<a href="${whatsappLink}" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700">ğŸ“© Candidatar-se</a>` : ''}
          </div>
        </div>
      `;
                }).join('');

                loadMoreBtn.style.display = filteredJobs.length > end ? 'block' : 'none';
            }

            renderJobs();
        }

        loadJobs();
    </script>

</body>

</html>